{"type":"decision","title":"Orchestrator Model","rationale":"User Claude Code session IS the orchestrator. No separate daemon. CLAUDE.md + hooks + overstory CLI provides integration. Eliminates extra infrastructure.","classification":"foundational","recorded_at":"2026-02-12T15:18:08.290Z","tags":["orchestrator","claude-code","hooks"],"id":"mx-59ed6a"}
{"type":"decision","title":"Agent Definition: Library Base + Dynamic Overlay","rationale":"Base .md files define HOW (reusable agent role). Dynamic overlay CLAUDE.md defines WHAT (task-specific context). Keeps delegation minimal - team leads only pass WHAT, not HOW.","classification":"foundational","recorded_at":"2026-02-12T15:18:11.173Z","tags":["agents","overlay","delegation"],"id":"mx-396b5a"}
{"type":"decision","title":"Hierarchical Delegation with Depth Limit","rationale":"Orchestrator -> team leads -> specialists. Default max depth 2. Prevents runaway spawning. Leads can call overstory sling to spawn sub-workers. Each level crafts system prompts for agents below.","classification":"foundational","recorded_at":"2026-02-12T15:18:31.165Z","tags":["hierarchy","delegation","depth"],"id":"mx-1ae0ae"}
{"type":"pattern","name":"Layer-by-layer implementation with parallel delegation","description":"Overstory is built in dependency layers (L1 core infra -> L2 agent lifecycle -> L3 merge+orchestration -> L4 watchdog+CLI). Each layer's tasks are independent and can be parallelized across teammates. Close the epic after all subtasks to unblock the next layer. Use beads for tracking: claim all tasks up front, delegate to teammates, close when all pass quality gates.","classification":"tactical","recorded_at":"2026-02-12T15:40:05.248Z","tags":["delegation","parallel","layers"],"id":"mx-2d03ba"}
{"type":"decision","title":"Sessions JSON for agent tracking","rationale":"Simple JSON file avoids another SQLite DB for low-frequency writes. Sling writes new sessions, watchdog/status read them. Worktree clean updates state to zombie.","classification":"tactical","recorded_at":"2026-02-12T15:40:16.433Z","tags":["sessions","state","agents"],"id":"mx-454bf3"}
{"type":"pattern","name":"Worktree-aware config loading","description":"loadConfig resolves the real project root via git rev-parse --git-common-dir when .overstory/config.yaml is not found at cwd. Critical for any overstory command running inside an agent worktree (hooks call log, mail, prime from worktree cwd).","classification":"tactical","recorded_at":"2026-02-12T16:33:29.605Z","id":"mx-1be20d"}
{"type":"decision","title":"CI/CD mirrors mulch project pattern","rationale":"Consistency across jayminwest projects. Separate ci.yml (PRs + push to main, runs lint/typecheck/test) and auto-tag.yml (push to main only, creates git tag + GitHub release on version bump). Uses oven-sh/setup-bun for Bun runtime in GitHub Actions.","classification":"tactical","recorded_at":"2026-02-12T16:33:57.374Z","id":"mx-3fbe85"}
{"type":"pattern","name":"Auto-tag on version bump","description":"auto-tag.yml compares package.json version against existing git tags (not previous commit diff). If no tag exists for the current version, it verifies version sync between package.json and src/index.ts, then creates the tag and a GitHub release with auto-generated notes.","classification":"tactical","recorded_at":"2026-02-12T16:34:00.184Z","id":"mx-2e517a"}
