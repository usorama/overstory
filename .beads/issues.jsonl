{"id":"overstory-05o","title":"[Epic] Layer 1: Core Infrastructure","description":"All core infrastructure modules. 8 parallel tasks. Depends on Layer 0 completion.","status":"closed","priority":1,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:20.538883-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:28:35.03906-08:00","closed_at":"2026-02-12T07:28:35.03906-08:00","close_reason":"All 8 L1 subtasks completed","dependencies":[{"issue_id":"overstory-05o","depends_on_id":"overstory-0kf","type":"blocks","created_at":"2026-02-12T07:11:59.539909-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-05o","depends_on_id":"overstory-50l","type":"blocks","created_at":"2026-02-12T07:12:00.489658-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-05o","depends_on_id":"overstory-640","type":"blocks","created_at":"2026-02-12T07:12:01.240132-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-05o","depends_on_id":"overstory-gr3","type":"blocks","created_at":"2026-02-12T07:12:02.301808-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-05o","depends_on_id":"overstory-5y5","type":"blocks","created_at":"2026-02-12T07:12:03.04026-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-05o","depends_on_id":"overstory-l2e","type":"blocks","created_at":"2026-02-12T07:12:03.789317-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-05o","depends_on_id":"overstory-41f","type":"blocks","created_at":"2026-02-12T07:12:04.563558-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-05o","depends_on_id":"overstory-gtj","type":"blocks","created_at":"2026-02-12T07:12:05.415018-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-0kf","title":"L1-1: Implement logging system (src/logging/*)","description":"Multi-format logger (human-readable + NDJSON), secret sanitizer with redaction patterns (API keys, tokens, Bearer), ANSI console reporter. Files: src/logging/logger.ts, src/logging/sanitizer.ts, src/logging/reporter.ts","status":"closed","priority":1,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:25.178092-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:25:12.811655-08:00","closed_at":"2026-02-12T07:25:12.811655-08:00","close_reason":"Implemented logging system: logger.ts (multi-format writer), sanitizer.ts (secret redaction), reporter.ts (ANSI console output)","dependencies":[{"issue_id":"overstory-0kf","depends_on_id":"overstory-68p","type":"blocks","created_at":"2026-02-12T07:13:38.814912-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-0sw","title":"sling'd agents may not have 'overstory' on PATH in tmux","description":"Agent tmux sessions launched by 'overstory sling' rely on hooks that call 'overstory prime', 'overstory mail check', and 'overstory log'. However, if overstory is installed via 'bun link' (which adds it to ~/.bun/bin/), the tmux session may not inherit the PATH that includes ~/.bun/bin/. This would cause all hooks to silently fail. The sling command should either: 1) Verify overstory is globally accessible, 2) Use an absolute path to the overstory binary in hooks, or 3) Ensure the tmux session inherits the necessary PATH.","status":"closed","priority":2,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:20:22.02265-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T08:32:31.447904-08:00","closed_at":"2026-02-12T08:32:31.447904-08:00","close_reason":"tmux createSession now detects overstory binary path and prepends it to PATH in spawned sessions"}
{"id":"overstory-0ze","title":"mail send --agent flag undocumented in help (works as alias for --from)","description":"The mail send command accepts an --agent flag as an alias for --from, but the help text only documents --from. The overlay CLAUDE.md template shows examples using --agent for all mail commands. The help should document --agent or the overlay examples should use --from for consistency.","status":"closed","priority":3,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T09:41:00.130316-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T09:47:20.593863-08:00","closed_at":"2026-02-12T09:47:20.593863-08:00","close_reason":"Documented --agent as alias for --from in mail send and reply help text"}
{"id":"overstory-16g","title":"Epic: Adopt 'never mock what you can use for real' testing philosophy","description":"Overhaul the test suite to follow the principle: never mock what you can use for real. Currently 4 of 12 test files use Bun.spawn mocks for external tools (worktree, beads-client, resolver, tmux). Most of these can be replaced with real implementations using temp directories, real git repos, real SQLite, and real bd. Only tmux and external AI services truly need mocking. This epic also covers relocating tests from __tests__/ to colocated with source files.","status":"closed","priority":2,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:55:47.248182-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T09:14:41.040434-08:00","closed_at":"2026-02-12T09:14:41.040434-08:00","close_reason":"All tasks complete: tests colocated, test harness created, CLAUDE.md updated, tmux mock documented, worktree/resolver/beads-client tests rewritten with real implementations. Found and fixed real bd CLI parsing bugs."}
{"id":"overstory-19p","title":"[Epic] Layer 3: Merge + Orchestration","description":"Merge system and orchestration commands. 6 parallel tasks. Depends on Layer 2 completion.","status":"closed","priority":3,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:49.943203-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:36:35.111621-08:00","closed_at":"2026-02-12T07:36:35.111621-08:00","close_reason":"All 6 L3 subtasks completed","dependencies":[{"issue_id":"overstory-19p","depends_on_id":"overstory-3vt","type":"blocks","created_at":"2026-02-12T07:12:19.266371-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-19p","depends_on_id":"overstory-26j","type":"blocks","created_at":"2026-02-12T07:12:19.402906-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-19p","depends_on_id":"overstory-tgb","type":"blocks","created_at":"2026-02-12T07:12:19.538662-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-19p","depends_on_id":"overstory-mxi","type":"blocks","created_at":"2026-02-12T07:12:19.671997-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-19p","depends_on_id":"overstory-1l3","type":"blocks","created_at":"2026-02-12T07:12:19.812703-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-19p","depends_on_id":"overstory-94i","type":"blocks","created_at":"2026-02-12T07:12:19.967081-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-1l3","title":"L3-5: Implement status command (src/commands/status.ts)","description":"CLI: overstory status [--json] [--watch]. Shows: active agents (name, state, task, duration), worktree status, beads summary, mail queue depth, merge queue state. --watch mode uses polling for live updates.","status":"closed","priority":3,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:12:09.461311-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:36:21.716923-08:00","closed_at":"2026-02-12T07:36:21.716923-08:00","close_reason":"All L3 modules implemented, lint+types clean","dependencies":[{"issue_id":"overstory-1l3","depends_on_id":"overstory-rbj","type":"blocks","created_at":"2026-02-12T07:13:43.226662-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-26j","title":"L3-2: Implement tiered conflict resolver (src/merge/resolver.ts)","description":"4-tier conflict resolution: 1) Clean merge (git merge --no-edit), 2) Auto-resolve (parse conflict markers), 3) AI-resolve (spawn claude --print with both versions), 4) Re-imagine (spawn claude --print on fresh checkout to reimplement). Tiers escalate automatically. Each tier configurable (enable/disable).","status":"closed","priority":3,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:58.395385-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:36:21.651943-08:00","closed_at":"2026-02-12T07:36:21.651943-08:00","close_reason":"All L3 modules implemented, lint+types clean","dependencies":[{"issue_id":"overstory-26j","depends_on_id":"overstory-rbj","type":"blocks","created_at":"2026-02-12T07:13:42.786609-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-2ed","title":"L2-3: Implement agent identity (src/agents/identity.ts)","description":"Persistent agent identity management. Create/load/update AgentIdentity YAML files at .overstory/agents/{name}/identity.yaml. Track sessions completed, expertise domains, recent tasks. Functions: createIdentity, loadIdentity, updateIdentity.","status":"closed","priority":2,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:50.235583-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:33:09.560065-08:00","closed_at":"2026-02-12T07:33:09.560065-08:00","close_reason":"All L2 modules implemented, lint+types clean","dependencies":[{"issue_id":"overstory-2ed","depends_on_id":"overstory-05o","type":"blocks","created_at":"2026-02-12T07:13:40.937136-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-2kn","title":"L4-5: Implement log command (src/commands/log.ts)","description":"CLI: overstory log \u003cevent\u003e --agent \u003cname\u003e. Called by Pre/PostToolUse and Stop hooks. Events: tool-start, tool-end, session-end. Writes to .overstory/logs/{agent-name}/{session-timestamp}/ in multi-format (session.log human-readable + events.ndjson machine-parseable).","status":"closed","priority":4,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:12:28.215057-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:39:41.975202-08:00","closed_at":"2026-02-12T07:39:41.975202-08:00","close_reason":"All L4 modules implemented, lint+types clean","dependencies":[{"issue_id":"overstory-2kn","depends_on_id":"overstory-19p","type":"blocks","created_at":"2026-02-12T07:13:45.471433-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-2mi","title":"Test task for sling","status":"in_progress","priority":2,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T09:36:06.136009-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T10:07:51.460662-08:00"}
{"id":"overstory-2ml","title":"L0-7: Write agents/builder.md base definition","description":"Builder agent: implementation agent. Can read/write/edit files, run bash (git, tests, lint), send mail. Must only modify files in FILE_SCOPE. Commits to worktree branch only.","status":"closed","priority":0,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:28.100512-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:20:05.122603-08:00","closed_at":"2026-02-12T07:20:05.122603-08:00","close_reason":"Created all 5 base agent definitions: scout (read-only explorer), builder (implementation), reviewer (validation), lead (delegation), merger (branch integration)"}
{"id":"overstory-2ni","title":"capabilityIndex was empty in original agent-manifest.json","description":"The agent-manifest.json generated by the initial 'overstory init' had capabilityIndex: {} (empty). Running 'init --force' correctly regenerated it with all capabilities. This suggests the manifest was created before the capabilityIndex generation code was added and never re-generated. Not a code bug per se (init.ts code is correct), but existing deployments may have stale manifests. Consider adding a migration or validation check that warns when capabilityIndex is empty.","status":"closed","priority":4,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T10:09:48.845497-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T10:14:41.526858-08:00","closed_at":"2026-02-12T10:14:41.526858-08:00","close_reason":"capabilityIndex already correctly populated in .overstory/agent-manifest.json -- matches buildAgentManifest() output"}
{"id":"overstory-378","title":"status --watch: no validation for --interval value","description":"overstory status --watch --interval accepts invalid values: negative numbers cause infinite busy-wait, zero causes 100% CPU spin, NaN (from non-numeric input like 'abc') causes undefined Bun.sleep behavior. Unlike sling.ts which validates --depth with Number.isNaN(), status.ts line 230 skips NaN check entirely. Fix: add NaN check and minimum interval validation (e.g. \u003e= 500ms).","status":"closed","priority":2,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T10:09:33.105487-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T10:14:02.596158-08:00","closed_at":"2026-02-12T10:14:02.596158-08:00","close_reason":"Fixed: --interval now validates for NaN and minimum 500ms, following sling.ts --depth validation pattern"}
{"id":"overstory-38d","title":"L5-7: Write mail-client.test.ts","description":"Tests for src/mail/client.ts. Cover: send() returns ID, check() returns unread for agent, checkInject() formats for hook injection, list() with filters (from/to/unread), markRead(), reply() creates threaded message.","status":"closed","priority":4,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:12:32.422933-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:54:20.436677-08:00","closed_at":"2026-02-12T07:54:20.436677-08:00","close_reason":"Closed","dependencies":[{"issue_id":"overstory-38d","depends_on_id":"overstory-05o","type":"blocks","created_at":"2026-02-12T07:13:47.730538-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-39u","title":"AI-resolve tier corrupts files: claude --print outputs prose instead of code","description":"When tier 3 (AI-resolve) triggers, the resolver calls 'claude --print -p \u003cprompt\u003e' to resolve conflicts. But claude --print can return conversational prose (e.g., 'I need permission to edit the file...') instead of the actual resolved code. This output gets written directly to the file, corrupting it. The commit succeeds silently, leaving corrupted files on the canonical branch. Fix must include: (1) validate that resolved output is valid code (e.g., check it parses/compiles), (2) fall back to tier 4 if output looks like prose, (3) possibly use a more structured prompt that constrains output format.","status":"closed","priority":1,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T10:34:32.651697-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T10:41:39.077233-08:00","closed_at":"2026-02-12T10:41:39.077233-08:00","close_reason":"Closed"}
{"id":"overstory-3n0","title":"L4-4: Implement watch command (src/commands/watch.ts)","description":"CLI: overstory watch [--interval \u003cms\u003e] [--background]. Starts watchdog daemon. Foreground mode shows real-time status. Background mode daemonizes. Interval configurable, default 30000ms.","status":"closed","priority":4,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:12:22.651404-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:39:41.953007-08:00","closed_at":"2026-02-12T07:39:41.953007-08:00","close_reason":"All L4 modules implemented, lint+types clean","dependencies":[{"issue_id":"overstory-3n0","depends_on_id":"overstory-19p","type":"blocks","created_at":"2026-02-12T07:13:45.331166-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-3up","title":"mail send accepts invalid --type and --priority values","description":"'overstory mail send' accepts arbitrary values for --type and --priority without validation. The CLI docs specify type should be one of: status|question|result|error, and priority should be one of: low|normal|high|urgent. Currently any string is accepted (e.g., --type invalid_type, --priority invalid_prio both succeed). Should validate against allowed values.","status":"closed","priority":3,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:11:19.801105-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T08:43:49.101828-08:00","closed_at":"2026-02-12T08:43:49.101828-08:00","close_reason":"Added validation for --type and --priority in handleSend — rejects invalid values with ValidationError listing allowed options"}
{"id":"overstory-3vt","title":"L3-1: Implement merge queue (src/merge/queue.ts)","description":"FIFO merge queue for agent branches. Tracks: branchName, beadId, agentName, filesModified, enqueuedAt, status (pending/merging/merged/conflict/failed), resolvedTier. Functions: enqueue, dequeue, peek, list, updateStatus.","status":"closed","priority":3,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:54.295042-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:36:21.628694-08:00","closed_at":"2026-02-12T07:36:21.628694-08:00","close_reason":"All L3 modules implemented, lint+types clean","dependencies":[{"issue_id":"overstory-3vt","depends_on_id":"overstory-rbj","type":"blocks","created_at":"2026-02-12T07:13:42.648756-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-3wa","title":"L5-3: Write worktree.test.ts","description":"Tests for src/worktree/manager.ts. Cover: create worktree (uses temp dirs), list worktrees, remove worktree, branch naming convention (overstory/{agentName}/{beadId}), error handling for missing repo.","status":"closed","priority":4,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:12:28.851869-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:54:20.463578-08:00","closed_at":"2026-02-12T07:54:20.463578-08:00","close_reason":"Closed","dependencies":[{"issue_id":"overstory-3wa","depends_on_id":"overstory-05o","type":"blocks","created_at":"2026-02-12T07:13:47.140959-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-41f","title":"L1-7: Implement metrics storage (src/metrics/*)","description":"SQLite metrics store via bun:sqlite. Schema for SessionMetrics (agent name, bead ID, capability, duration, exit code, merge result). Summary reporting with aggregations. Files: src/metrics/store.ts, src/metrics/summary.ts","status":"closed","priority":1,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:50.245509-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:26:01.472187-08:00","closed_at":"2026-02-12T07:26:01.472187-08:00","close_reason":"Implemented metrics storage (SQLite store + summary reporter) and mail SQLite store (schema, CRUD, WAL mode, prepared statements)","dependencies":[{"issue_id":"overstory-41f","depends_on_id":"overstory-68p","type":"blocks","created_at":"2026-02-12T07:13:39.670025-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-4ku","title":"merge fails: cannot checkout main when orchestrator worktree has it checked out","description":"Running 'overstory merge --branch \u003cagent-branch\u003e' sometimes fails with 'fatal: main is already checked out'. Observed during e2e testing: first merge attempt failed, second attempt succeeded immediately after. Possibly related to: (1) git state corruption from previous dry-run, (2) uncommitted .beads/issues.jsonl confusing checkout, or (3) race condition in config.project.root resolution. Needs investigation to determine if this is reliably reproducible.","status":"closed","priority":1,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T10:24:48.379419-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T10:41:39.053575-08:00","closed_at":"2026-02-12T10:41:39.053575-08:00","close_reason":"Closed"}
{"id":"overstory-4nw","title":"watch --background: exit code 0 when watchdog already running","description":"Running 'overstory watch --background' when a watchdog is already running outputs a warning message but exits with code 0 (success). Should exit with code 1 to indicate the operation didn't succeed, or provide a way to check if the watchdog is running (e.g. 'overstory watch --status').","status":"closed","priority":4,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T10:09:51.035346-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T10:14:43.202686-08:00","closed_at":"2026-02-12T10:14:43.202686-08:00","close_reason":"watch --background now exits with code 1 and writes to stderr when watchdog is already running"}
{"id":"overstory-4ra","title":"merge --branch shows raw git error for nonexistent branches","description":"'overstory merge --branch nonexistent-branch' leaks a raw git error message: 'fatal: ambiguous argument main...nonexistent-branch'. Should first validate that the branch exists and provide a user-friendly error like 'Branch nonexistent-branch not found'.","status":"closed","priority":3,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:11:49.921127-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T08:43:20.020735-08:00","closed_at":"2026-02-12T08:43:20.020735-08:00","close_reason":"Added branch existence validation in merge --branch. Uses git rev-parse --verify refs/heads/\u003cbranch\u003e before attempting git diff, throwing a user-friendly ValidationError instead of leaking raw git errors."}
{"id":"overstory-4uu","title":"staggerDelayMs is never enforced between agent spawns","description":"The config has agents.staggerDelayMs=2000 intended as a delay between spawning agents to avoid resource contention, but sling never reads or enforces this delay. Multiple agents can be spawned instantly back-to-back.","status":"closed","priority":3,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:22:59.362789-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T08:53:44.789454-08:00","closed_at":"2026-02-12T08:53:44.789454-08:00","close_reason":"Extracted calculateStaggerDelay pure function and wired it into slingCommand step 4b. 12 unit tests added."}
{"id":"overstory-50l","title":"L1-2: Implement agent manifest loader (src/agents/manifest.ts)","description":"Load agent-manifest.json, capability routing (find agents by capability), validation of agent definitions. Returns typed AgentManifest. Queries: getByCapability(cap) -\u003e AgentDefinition[]","status":"closed","priority":1,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:29.294856-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:25:14.359612-08:00","closed_at":"2026-02-12T07:25:14.359612-08:00","close_reason":"Implemented manifest loader (load, capability routing, validation) and worktree manager (create/list/remove via git CLI)","dependencies":[{"issue_id":"overstory-50l","depends_on_id":"overstory-68p","type":"blocks","created_at":"2026-02-12T07:13:38.960165-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-51t","title":"Agent state stuck at 'booting' — evaluateHealth() never transitions to 'working'","description":"In src/watchdog/health.ts, evaluateHealth() has a code path where session.state === 'booting' unconditionally returns state: 'booting' without checking lastActivity freshness. This means an agent NEVER transitions from booting to working, even when the watchdog is running. The fix: when booting and lastActivity is recent (within staleThresholdMs), transition to 'working'. Additionally, without the watchdog running, log events (tool-start, tool-end) only update lastActivity but never touch the state field in sessions.json, so agents are permanently stuck at booting.","status":"closed","priority":1,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T09:40:56.790025-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T09:47:49.402863-08:00","closed_at":"2026-02-12T09:47:49.402863-08:00","close_reason":"Fixed evaluateHealth() to transition booting→working when activity is recent. Also fixed updateLastActivity() in log.ts to transition state from booting to working on first tool event."}
{"id":"overstory-5rq","title":".overstory/.gitignore missing merge-queue.json","description":"The .overstory/.gitignore generated by init does not include merge-queue.json. When overstory merge is run, it creates merge-queue.json which shows up as an untracked file in git status. This is a runtime state file that should be gitignored alongside sessions.json and the SQLite databases.","status":"closed","priority":3,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T09:44:25.410111-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T09:55:56.446377-08:00","closed_at":"2026-02-12T09:55:56.446377-08:00","close_reason":"Added merge-queue.json to .overstory/.gitignore generated by init"}
{"id":"overstory-5u8","title":"worktree.test.ts: Replace Bun.spawn mocks with real git operations","description":"worktree.test.ts currently mocks all Bun.spawn calls for git worktree add/list/remove. Replace with real git operations in temp directories. Use the shared test harness to create a real git repo, then test createWorktree/listWorktrees/removeWorktree against actual git. This catches real parsing issues with git porcelain output and validates command construction end-to-end. Ref mulch failure mx-56558b: mock.module() leaks across test files.","status":"closed","priority":2,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:56:12.984224-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T09:05:22.457262-08:00","closed_at":"2026-02-12T09:05:22.457262-08:00","close_reason":"Replaced all Bun.spawn mocks with real git operations using test-helpers.ts","dependencies":[{"issue_id":"overstory-5u8","depends_on_id":"overstory-y72","type":"blocks","created_at":"2026-02-12T08:56:33.265159-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-5y5","title":"L1-5: Implement beads CLI client (src/beads/client.ts)","description":"Wrapper around bd CLI with --json output parsing. Interface: ready(), show(id), create(title, opts), claim(id), close(id, reason), status(), molPour(protoId, vars). All via Bun.spawn.","status":"closed","priority":1,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:41.494802-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:25:38.321618-08:00","closed_at":"2026-02-12T07:25:38.321618-08:00","close_reason":"Implemented beads CLI client — ready, show, create, claim, close, list via Bun.spawn with --json parsing","dependencies":[{"issue_id":"overstory-5y5","depends_on_id":"overstory-68p","type":"blocks","created_at":"2026-02-12T07:13:39.374196-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-640","title":"L1-3: Implement worktree manager (src/worktree/manager.ts)","description":"Git worktree create/list/cleanup via Bun.spawn(['git', 'worktree', ...]). Branch naming: overstory/{agentName}/{beadId}. Functions: createWorktree, listWorktrees, removeWorktree.","status":"closed","priority":1,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:33.763095-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:25:14.382011-08:00","closed_at":"2026-02-12T07:25:14.382011-08:00","close_reason":"Implemented manifest loader (load, capability routing, validation) and worktree manager (create/list/remove via git CLI)","dependencies":[{"issue_id":"overstory-640","depends_on_id":"overstory-68p","type":"blocks","created_at":"2026-02-12T07:13:39.10387-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-68p","title":"[Epic] Layer 0: Project Scaffolding","status":"closed","priority":0,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:10:30.37382-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:21:28.211742-08:00","closed_at":"2026-02-12T07:21:28.211742-08:00","close_reason":"All 13 L0 tasks completed: scaffolding (package.json, tsconfig, biome), core types (types.ts, errors.ts, config.ts), CLAUDE.md conventions, 5 agent definitions, 3 templates","dependencies":[{"issue_id":"overstory-68p","depends_on_id":"overstory-c2q","type":"blocks","created_at":"2026-02-12T07:11:58.176126-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-68p","depends_on_id":"overstory-gst","type":"blocks","created_at":"2026-02-12T07:11:58.321581-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-68p","depends_on_id":"overstory-kqs","type":"blocks","created_at":"2026-02-12T07:11:58.459194-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-68p","depends_on_id":"overstory-7r9","type":"blocks","created_at":"2026-02-12T07:11:58.594514-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-68p","depends_on_id":"overstory-uox","type":"blocks","created_at":"2026-02-12T07:11:58.729208-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-68p","depends_on_id":"overstory-aun","type":"blocks","created_at":"2026-02-12T07:11:58.86613-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-68p","depends_on_id":"overstory-2ml","type":"blocks","created_at":"2026-02-12T07:11:58.999916-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-68p","depends_on_id":"overstory-j1c","type":"blocks","created_at":"2026-02-12T07:11:59.138735-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-68p","depends_on_id":"overstory-a7f","type":"blocks","created_at":"2026-02-12T07:11:59.278263-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-68p","depends_on_id":"overstory-lww","type":"blocks","created_at":"2026-02-12T07:11:59.419665-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-68p","depends_on_id":"overstory-6we","type":"blocks","created_at":"2026-02-12T07:11:59.530966-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-68p","depends_on_id":"overstory-tko","type":"blocks","created_at":"2026-02-12T07:11:59.664071-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-68p","depends_on_id":"overstory-6md","type":"blocks","created_at":"2026-02-12T07:11:59.80685-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-6il","title":"Update CLAUDE.md testing section to codify 'never mock what you can use for real'","description":"Update the Testing section in CLAUDE.md to codify the new philosophy: (1) Use real filesystem via temp dirs (already done), (2) Use real SQLite via temp files (already done), (3) Use real git repos for worktree/merge tests, (4) Use real bd CLI for beads-client tests, (5) Only mock external services that have side effects (tmux, AI APIs) or aren't available in CI. Reference mulch failure mx-56558b about mock.module() leaking. Remove the line 'Tests should mock subprocess calls (Bun.spawn)' and replace with the new guidance.","status":"closed","priority":2,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:56:26.984204-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T08:59:53.905017-08:00","closed_at":"2026-02-12T08:59:53.905017-08:00","close_reason":"Updated CLAUDE.md testing section: replaced mock-first guidance with 'never mock what you can use for real' philosophy, updated test locations to reflect colocated tests, added test helpers reference, updated directory structure and file organization sections"}
{"id":"overstory-6ka","title":"L5-2: Write manifest.test.ts","description":"Tests for src/agents/manifest.ts. Cover: loading valid manifest, capability routing (find agents by capability), validation of agent definitions, missing manifest handling, invalid entries.","status":"closed","priority":4,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:12:28.152081-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:54:20.487305-08:00","closed_at":"2026-02-12T07:54:20.487305-08:00","close_reason":"Closed","dependencies":[{"issue_id":"overstory-6ka","depends_on_id":"overstory-05o","type":"blocks","created_at":"2026-02-12T07:13:46.993526-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-6md","title":"L0-13: Write templates/hooks.json.tmpl","description":"Template for .claude/settings.local.json deployed to each worktree. Includes SessionStart (prime), UserPromptSubmit (mail check), Pre/PostToolUse (logging), Stop (session end), PreCompact hooks.","status":"closed","priority":0,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:51.895329-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:18:45.129572-08:00","closed_at":"2026-02-12T07:18:45.129572-08:00","close_reason":"Created all 3 templates: CLAUDE.md.tmpl (orchestrator awareness), overlay.md.tmpl (per-worker overlay), hooks.json.tmpl (agent hooks config)"}
{"id":"overstory-6we","title":"L0-11: Write templates/CLAUDE.md.tmpl","description":"Template for orchestrator's CLAUDE.md. Documents overstory CLI commands, conventions, hook behavior. Template variables for project name, config paths.","status":"closed","priority":0,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:44.200052-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:18:45.087061-08:00","closed_at":"2026-02-12T07:18:45.087061-08:00","close_reason":"Created all 3 templates: CLAUDE.md.tmpl (orchestrator awareness), overlay.md.tmpl (per-worker overlay), hooks.json.tmpl (agent hooks config)"}
{"id":"overstory-6zv","title":"CLI commands outside git repo show raw git error instead of user-friendly message","description":"Running 'overstory status' from a non-overstory directory (e.g. /tmp) produces: Error [WORKTREE_ERROR]: git worktree list --porcelain failed (exit 128): fatal: not a git repository. Should instead show a user-friendly message like 'Not in an overstory project. Run overstory init first.' The error leaks the internal git command failure rather than wrapping it.","status":"closed","priority":3,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T10:09:39.300831-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T10:15:24.929202-08:00","closed_at":"2026-02-12T10:15:24.929202-08:00","close_reason":"Catch WorktreeError with 'not a git repository' in CLI entry point, show friendly message"}
{"id":"overstory-6zw","title":"resolver.test.ts: Replace file and git mocks with real implementations","description":"resolver.test.ts mocks Bun.spawn (git + claude CLI), Bun.file, and Bun.write. Replace file mocks with real temp files and git mocks with real git repos that have actual merge conflicts. Only keep mocks for the claude CLI (external AI service). This is the most mock-heavy test file and benefits most from real implementations. Use shared test harness for git repo setup with divergent branches that create real conflicts.","status":"closed","priority":2,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:56:16.015347-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T09:12:32.205535-08:00","closed_at":"2026-02-12T09:12:32.205535-08:00","close_reason":"Replaced file and git mocks with real implementations in resolver.test.ts. Only claude CLI remains mocked (for Tier 3/4).","dependencies":[{"issue_id":"overstory-6zw","depends_on_id":"overstory-y72","type":"blocks","created_at":"2026-02-12T08:56:33.412011-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-71o","title":"sling --json outputs both human-readable AND JSON (should be JSON only)","description":"When running 'overstory sling \u003cid\u003e --name \u003cname\u003e --json', the output includes both the human-readable launch message (rocket emoji, bullet points) AND the JSON object. With --json flag, only JSON should be output. The human-readable output should be suppressed when --json is specified. This affects downstream tooling that expects to parse pure JSON from stdout.","status":"closed","priority":3,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T09:44:00.763541-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T09:56:08.541979-08:00","closed_at":"2026-02-12T09:56:08.541979-08:00","close_reason":"Suppressed human-readable output when --json flag is specified in sling command"}
{"id":"overstory-749","title":"status.ts: race condition in session state mutation during gatherStatus","description":"gatherStatus() in status.ts reads sessions.json, filters dead tmux sessions, updates state, and writes back. Between reading and writing, another agent process could modify sessions.json, causing a lost-write conflict. This is especially relevant when multiple agents are active and the watchdog is running. Consider using file locking or atomic compare-and-swap for session state updates.","status":"closed","priority":3,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T10:09:41.767926-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T10:14:40.523333-08:00","closed_at":"2026-02-12T10:14:40.523333-08:00","close_reason":"Fixed race condition in gatherStatus: sessions.json now uses write-to-tmp + atomic rename instead of direct Bun.write"}
{"id":"overstory-7a2","title":"session-end log event does not transition agent state to completed","description":"In log.ts, the session-end event updates identity and clears the session marker, but never transitions the agent state in sessions.json from 'working' to 'completed'. The updateLastActivity() function only handles booting-\u003eworking. This means agents stay in 'working' state forever after their session ends, which breaks worktree clean --completed (it never finds completed agents to clean).","status":"closed","priority":2,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T10:29:34.989686-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T10:41:33.130445-08:00","closed_at":"2026-02-12T10:41:33.130445-08:00","close_reason":"Added 'completed' to AgentState type, added transitionToCompleted() in log.ts session-end handler, updated worktree clean to recognize completed state, excluded completed agents from concurrency limits and watchdog checks"}
{"id":"overstory-7cx","title":"Optimize test harness: 30s+ runtime after no-mock migration","description":"After switching to real git repos/bd CLI instead of mocks, the test suite takes 30-40s. Three files account for ~97% of runtime:\n\n## Profiling Results (per-file, bun test)\n\n| File | Tests | Time | % of total |\n|---|---|---|---|\n| beads/client.test.ts | 16 | 22.76s | 58% |\n| merge/resolver.test.ts | 14 | 10.34s | 26% |\n| worktree/manager.test.ts | 16 | 4.18s | 11% |\n| test-helpers.test.ts | 8 | 2.12s | 5% |\n| All other 9 files (205 tests) | 205 | \u003c0.3s | \u003c1% |\n\n## Root Causes\n\n### beads/client.test.ts (22.76s) — Worst offender\n- Each of 16 tests runs `beforeEach` that creates a fresh temp git repo (5 subprocess spawns: init, config x2, add, commit) + `bd init` (another subprocess)\n- Then each test spawns 2-5 more `bd` CLI calls (create, show, claim, close, list, ready)\n- Total: ~100+ subprocess spawns for 16 tests\n- The bd CLI itself has startup overhead (Python? Node?) on each invocation\n\n### merge/resolver.test.ts (10.34s)\n- Each of 14 tests creates a fresh git repo via `beforeEach`\n- Tests then do 4-8 git operations each (commit, branch, checkout, merge, rm, status)\n- Some tests set up identical conflict scenarios (setupContentConflict, setupDeleteModifyConflict, setupReimagineScenario called multiple times)\n\n### worktree/manager.test.ts (4.18s)\n- Three separate `describe` blocks each with their own `beforeEach` creating fresh repos\n- 16 tests × (git init + config + add + commit + mkdir) = ~80 subprocess spawns\n\n## Optimization Ideas (investigate, pick best ROI)\n\n1. **Share repos within describe blocks** — Use `beforeAll` instead of `beforeEach` where tests don't mutate shared state, or create a base repo once and clone/branch per test\n2. **Batch git config** — Combine the 2 git config calls into 1 subprocess (or use GIT_AUTHOR_NAME/GIT_COMMITTER_NAME env vars instead)\n3. **beads/client: reduce bd CLI spawns** — The bd CLI startup cost dominates. Options:\n   - Share one initialized repo across tests that don't conflict (list/ready tests need isolation, but create/show don't)\n   - Create multiple issues in beforeAll, then test against them\n4. **resolver: share conflict setups** — setupContentConflict and setupDeleteModifyConflict are called by multiple tests. Create the conflict once, then run assertions against it\n5. **Parallelize independent subprocess calls** — git config user.email and git config user.name are independent and can run concurrently via Promise.all\n6. **Consider git template dir** — Pre-configure a template with user.email/user.name so git init picks them up automatically, eliminating 2 spawns per repo\n\n## Target\nGet the suite under 10s while keeping the no-mock philosophy (real git repos, real bd CLI).","notes":"## Additional Finding: Temp Dir Leakage\n\n120 orphaned `overstory-test-*` directories found in $TMPDIR:\n- 119/120 contain only `.beads/issues.jsonl` with test data (e.g. 'Limit issue 1')\n- 1/120 still has a full `.git/` repo\n- ~716K total disk usage (small but accumulates)\n- `.git/` dirs are cleaned but `.beads/` persists, suggesting cleanup is partial or interrupted test runs skip `afterEach`\n\n**No contamination of project state:**\n- Project `.beads/issues.jsonl` has zero test issues (tests properly use isolated temp dirs)\n- No leaked git branches in the main repo\n- Git history is clean\n\n**Root cause:** `afterEach` calls `cleanupTempDir()` which does `rm(dir, { recursive: true })`. When tests are interrupted (Ctrl+C, timeout, crash), `afterEach` never fires and dirs accumulate. With ~40 temp dirs created per full test run, a few interrupted runs = 100+ orphans.\n\n**Potential fix:** Add a cleanup-on-start pattern: at the beginning of the test suite, scan $TMPDIR for stale `overstory-test-*` dirs and remove them. Or use `process.on('exit')` as a fallback cleanup.","status":"closed","priority":2,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T09:11:15.885004-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T09:30:22.806622-08:00","closed_at":"2026-02-12T09:30:22.806622-08:00","close_reason":"Reduced test suite from 38.1s to 11.7s (-69%). Template clone pattern in test-helpers, beforeAll shared repos in beads and resolver tests. All quality gates pass."}
{"id":"overstory-7r9","title":"L0-4: Implement config loader in src/config.ts","description":"YAML config loader for .overstory/config.yaml. Includes sensible defaults for all fields, validation of required fields, path resolution relative to project root. Returns typed OverstoryConfig.","status":"closed","priority":0,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:16.788784-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:18:57.544923-08:00","closed_at":"2026-02-12T07:18:57.544923-08:00","close_reason":"Implemented types.ts (all shared types), errors.ts (error hierarchy), config.ts (config loader with defaults and validation)"}
{"id":"overstory-85y","title":"sling depth check is off-by-one: depth \u003e= maxDepth should be depth \u003e maxDepth","description":"With default maxDepth=2, the depth check rejects 'depth 2 \u003e= maxDepth 2'. But the CLAUDE.md hierarchy shows 3 levels (orchestrator at 0, lead at 1, specialist at 2), meaning depth=2 should be the deepest allowed leaf node. The check in sling should be 'depth \u003e maxDepth' not 'depth \u003e= maxDepth', or maxDepth semantics should be documented as 'exclusive upper bound'.","status":"closed","priority":3,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T10:31:08.048368-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T10:41:32.560494-08:00","closed_at":"2026-02-12T10:41:32.560494-08:00","close_reason":"Fixed off-by-one: changed depth \u003e= maxDepth to depth \u003e maxDepth in sling.ts"}
{"id":"overstory-8cm","title":"No --help flag support for subcommands","description":"Passing --help to any subcommand (init, sling, prime, status, mail, merge, worktree, log, watch, metrics) either errors or runs the command instead of showing usage help. Examples: 'overstory mail --help' errors with 'Unknown mail subcommand: --help'. 'overstory watch --help' starts the watchdog daemon. 'overstory init --help' warns about already initialized. 'overstory sling --help' errors with validation. Each subcommand should check for --help/-h and display usage info.","status":"closed","priority":2,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:09:18.88392-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T08:32:22.170644-08:00","closed_at":"2026-02-12T08:32:22.170644-08:00","close_reason":"Added --help/-h support to all 10 subcommands and the main CLI entry point"}
{"id":"overstory-8fr","title":"status unread mail count includes ALL agents, not just orchestrator","description":"overstory status shows '6 unread' mail but overstory mail check (for orchestrator) shows 0 unread. The status command counts all unread messages across all agents (including test-agent, test-scout-3, x, etc). This is misleading because the orchestrator can't read messages addressed to other agents. The status should either show per-agent counts or only count messages for the current agent.","status":"closed","priority":3,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T09:41:26.447251-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T09:48:02.503614-08:00","closed_at":"2026-02-12T09:48:02.503614-08:00","close_reason":"Filter unread mail count by agent (default orchestrator) instead of counting all agents. Added --agent flag to status command."}
{"id":"overstory-8pg","title":"Test sling json","status":"closed","priority":3,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T09:43:44.284799-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T09:44:02.030934-08:00","closed_at":"2026-02-12T09:44:02.030934-08:00","close_reason":"Test issue for sling --json testing, no longer needed"}
{"id":"overstory-94i","title":"L3-6: Implement worktree command (src/commands/worktree.ts)","description":"CLI: overstory worktree list | clean [--completed] [--all]. List shows worktrees with agent status. Clean removes: worktree dir, branch ref (if merged), tmux session (kill if running). Logs preserved (never auto-deleted).","status":"closed","priority":3,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:12:13.847906-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:36:21.737507-08:00","closed_at":"2026-02-12T07:36:21.737507-08:00","close_reason":"All L3 modules implemented, lint+types clean","dependencies":[{"issue_id":"overstory-94i","depends_on_id":"overstory-rbj","type":"blocks","created_at":"2026-02-12T07:13:43.365292-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-9ju","title":"Closed task for testing","status":"closed","priority":4,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T10:06:51.772977-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T10:06:56.02381-08:00","closed_at":"2026-02-12T10:06:56.02381-08:00","close_reason":"Test issue for sling"}
{"id":"overstory-9zg","title":"metrics never populated: no code path calls metricsStore.recordSession()","description":"The metrics command always shows 'No sessions recorded' because nothing in the agent lifecycle calls metricsStore.recordSession(). The session-end log event updates identity but skips metrics recording. The log command or worktree clean should record session metrics (agent name, bead id, duration, capability) when an agent session ends.","status":"closed","priority":3,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T10:32:03.509983-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T10:41:37.250599-08:00","closed_at":"2026-02-12T10:41:37.250599-08:00","close_reason":"Added metricsStore.recordSession() call in session-end handler in log.ts"}
{"id":"overstory-a28","title":"L5-11: Write hooks-deployer.test.ts","description":"Tests for src/agents/hooks-deployer.ts. Cover: deploying hooks config to worktree as .claude/settings.local.json, agent name substitution in commands, all hook types present (SessionStart, UserPromptSubmit, Pre/PostToolUse, Stop, PreCompact).","status":"closed","priority":4,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:12:36.411068-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:56:26.843714-08:00","closed_at":"2026-02-12T07:56:26.843714-08:00","close_reason":"Closed","dependencies":[{"issue_id":"overstory-a28","depends_on_id":"overstory-05o","type":"blocks","created_at":"2026-02-12T07:13:48.358119-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-a7f","title":"L0-9: Write agents/lead.md base definition","description":"Team lead agent: can spawn sub-workers via overstory sling. Reads specs, decomposes work, delegates to specialists. Has canSpawn=true. Tracks sub-worker progress via beads and mail.","status":"closed","priority":0,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:35.755539-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:20:05.12537-08:00","closed_at":"2026-02-12T07:20:05.12537-08:00","close_reason":"Created all 5 base agent definitions: scout (read-only explorer), builder (implementation), reviewer (validation), lead (delegation), merger (branch integration)"}
{"id":"overstory-am6","title":"Agent identity (sessionsCompleted, recentTasks) never updated","description":"The updateIdentity() function in src/agents/identity.ts is fully implemented but never called. sessionsCompleted is always 0 and recentTasks is always empty. The session-end log event (src/commands/log.ts) should call updateIdentity() to increment sessionsCompleted and record the completed task. The merge command could also update identity after successful merges. Currently these fields are dead code.","status":"closed","priority":2,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:21:18.398521-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T08:29:56.995341-08:00","closed_at":"2026-02-12T08:29:56.995341-08:00","close_reason":"Closed"}
{"id":"overstory-aun","title":"L0-6: Write agents/scout.md base definition","description":"Scout agent: read-only exploration agent. Can read files, run non-destructive bash commands, search code. Cannot write files. Used for codebase exploration and research tasks.","status":"closed","priority":0,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:23.919487-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:20:05.120278-08:00","closed_at":"2026-02-12T07:20:05.120278-08:00","close_reason":"Created all 5 base agent definitions: scout (read-only explorer), builder (implementation), reviewer (validation), lead (delegation), merger (branch integration)"}
{"id":"overstory-ax6","title":"init should create .overstory/.gitignore for runtime state","description":"Move overstory-specific gitignore rules from root .gitignore into .overstory/.gitignore, following the same pattern as .beads/.gitignore. The init command should auto-create this file. Rules to include: SQLite DBs (mail.db, metrics.db + WAL/SHM), worktrees/, logs/, sessions.json, agents/ runtime state, specs/. Config files (config.yaml, agent-manifest.json, hooks.json) should remain tracked.","status":"closed","priority":2,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:39:42.631463-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T08:45:12.499255-08:00","closed_at":"2026-02-12T08:45:12.499255-08:00","close_reason":"Closed"}
{"id":"overstory-ax7","title":"init generates .overstory/ JSON files with spaces, Biome expects tabs","description":"'overstory init' generates hooks.json and agent-manifest.json with space indentation but Biome is configured for tab indentation. This causes 'biome check' to fail on the generated files. Also, sessions.json (created by sling) has a trailing newline issue. The init command should either: 1) Use tab indentation in generated JSON, or 2) Add .overstory/ to Biome's ignore list (since these are generated files).","status":"closed","priority":3,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:16:27.534419-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T08:45:12.523887-08:00","closed_at":"2026-02-12T08:45:12.523887-08:00","close_reason":"Closed"}
{"id":"overstory-b02","title":"L4-8: Implement CLI router (src/index.ts)","description":"Main CLI entry point. Command router mapping: init, sling, prime, status, mail (send/check/list/read/reply), merge, worktree (list/clean), log, watch, metrics. Parses args, validates, dispatches to command handlers. Includes --help and --version. Shebang: #!/usr/bin/env bun","status":"closed","priority":4,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:12:43.700846-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:39:42.046983-08:00","closed_at":"2026-02-12T07:39:42.046983-08:00","close_reason":"All L4 modules implemented, lint+types clean","dependencies":[{"issue_id":"overstory-b02","depends_on_id":"overstory-19p","type":"blocks","created_at":"2026-02-12T07:13:45.937888-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-bhz","title":"worktree clean --completed fails on .claude/ untracked files, then says 'No worktrees to clean'","description":"When sling deploys hooks to a worktree, it creates .claude/settings.local.json and .claude/CLAUDE.md. These are untracked files. When worktree clean --completed runs, git worktree remove fails because of these untracked files (exit 128). The command then misleadingly prints 'No worktrees to clean' after showing failure warnings. Two fixes needed: (1) worktree clean --completed should use force:true (same as --all) since the .claude/ dir will always be present, and (2) the 'No worktrees to clean' message should not appear when there were failures — it should say something like 'Failed to clean N worktrees (use --all to force)'.","status":"closed","priority":2,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T09:40:58.28652-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T09:50:53.388425-08:00","closed_at":"2026-02-12T09:50:53.388425-08:00","close_reason":"worktree clean --completed now uses force:true for worktree removal (handles untracked .claude/ files). Added failed[] tracking so 'No worktrees to clean' only shows when there are truly zero worktrees — failures now show 'Failed to clean N worktrees' instead."}
{"id":"overstory-bld","title":"E2E test task: add integration test for mail round-trip","status":"closed","priority":3,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T10:22:26.928937-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T10:32:19.184205-08:00","closed_at":"2026-02-12T10:32:19.184205-08:00","close_reason":"e2e test completed"}
{"id":"overstory-c2q","title":"L0-1: Initialize package.json, tsconfig.json, biome.json","description":"Bun init with strict TS config (noUncheckedIndexedAccess, no any), Biome config with tab indentation. Zero runtime deps. Bun runs TS directly — no build step. bin entry: overstory -\u003e ./src/index.ts","status":"closed","priority":0,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:05.693767-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:16:21.984219-08:00","closed_at":"2026-02-12T07:16:21.984219-08:00","close_reason":"Created package.json (zero runtime deps, bin entry), tsconfig.json (strict, noUncheckedIndexedAccess), biome.json (tab indent, no any). Installed deps. Created full directory structure."}
{"id":"overstory-c2x","title":"L4-1: Implement watchdog daemon (src/watchdog/daemon.ts)","description":"Tier 1 mechanical process monitoring. Runs on interval (default 30s). For each active session: check tmux alive, check Claude PID alive, check last activity timestamp. State transitions: working -\u003e stalled -\u003e zombie -\u003e terminate. Function: startDaemon(options) -\u003e { stop: () =\u003e void }.","status":"closed","priority":4,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:12:11.200545-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:39:41.885421-08:00","closed_at":"2026-02-12T07:39:41.885421-08:00","close_reason":"All L4 modules implemented, lint+types clean","dependencies":[{"issue_id":"overstory-c2x","depends_on_id":"overstory-19p","type":"blocks","created_at":"2026-02-12T07:13:44.918128-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-co8","title":"L2-6: Implement prime command (src/commands/prime.ts)","description":"The overstory prime command for context loading. Called by SessionStart hook. Loads config, recent agent activity, mulch expertise. Supports --agent flag for per-agent priming and --compact flag for reduced context (PreCompact hook).","status":"closed","priority":2,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:12:03.955578-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:33:09.627131-08:00","closed_at":"2026-02-12T07:33:09.627131-08:00","close_reason":"All L2 modules implemented, lint+types clean","dependencies":[{"issue_id":"overstory-co8","depends_on_id":"overstory-05o","type":"blocks","created_at":"2026-02-12T07:13:41.36507-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-cz8","title":"sling accepts closed bead issues — should reject non-open issues","description":"overstory sling overstory-2mi spawned an agent for a closed issue without warning. The sling command should validate that the bead issue status is 'open' or 'in_progress' before creating the worktree and tmux session. Currently it only checks that the issue exists (bd show succeeds) but not that it's in a workable state. The fix: after fetching the issue via bd show --json, check that the status is 'open' or 'in_progress', and reject closed/resolved issues.","status":"closed","priority":2,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T09:43:39.103379-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T09:51:02.726516-08:00","closed_at":"2026-02-12T09:51:02.726516-08:00","close_reason":"sling now validates bead issue status after fetching. Only 'open' and 'in_progress' issues are accepted. Closed/resolved issues throw ValidationError with a clear message."}
{"id":"overstory-d3x","title":"tmux.test.ts: Document as legitimate mock exception","description":"tmux.test.ts is the one test file where mocking is the correct approach — real tmux operations would interfere with the developer's session and are fragile in CI. Add a comment to the top of the test file documenting why mocks are used here (system-level side effects, CI incompatibility). Consider extracting the mockSpawnResult helper to the shared test harness since it may still be needed for tmux and claude CLI mocking.","status":"closed","priority":3,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:56:22.90369-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T08:59:49.498353-08:00","closed_at":"2026-02-12T08:59:49.498353-08:00","close_reason":"Added block comment documenting tmux tests as legitimate mock exception; fixed stale import paths from file relocation"}
{"id":"overstory-da2","title":"sling --spec: spec file not accessible from agent worktree","description":"The overlay CLAUDE.md references the spec file with a relative path (e.g., .overstory/specs/test-spec.md), but .overstory/ is gitignored so it does not exist in the agent's worktree. The agent cannot read its task spec. Fix options: (1) copy spec file to worktree during sling, (2) use absolute path in overlay, (3) symlink, or (4) embed spec content directly in the overlay.","status":"closed","priority":2,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T10:30:32.763758-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T10:41:38.926898-08:00","closed_at":"2026-02-12T10:41:38.926898-08:00","close_reason":"Resolve spec path to absolute in sling.ts before passing to overlay config, so agents in worktrees can read the spec file from the main repo"}
{"id":"overstory-dfc","title":"L5-6: Write mail-store.test.ts","description":"Tests for src/mail/store.ts. Cover: schema creation, message CRUD (insert/select/update), WAL mode enabled, concurrent read/write safety, index usage, thread_id grouping.","status":"closed","priority":4,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:12:31.678813-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:47:43.361616-08:00","closed_at":"2026-02-12T07:47:43.361616-08:00","close_reason":"Wrote mail-store.test.ts with 17 tests covering CRUD, filtering, threading, and concurrent access","dependencies":[{"issue_id":"overstory-dfc","depends_on_id":"overstory-05o","type":"blocks","created_at":"2026-02-12T07:13:47.5755-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-dg4","title":"mail read on already-read message silently succeeds","description":"Running 'overstory mail read \u003cid\u003e' on a message that is already marked as read outputs 'Marked \u003cid\u003e as read.' without indicating it was already read. While not harmful, it's misleading. Could either say 'Already read' or 'Marked as read (was already read)' for clarity.","status":"closed","priority":4,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T10:09:54.425626-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T10:14:44.881371-08:00","closed_at":"2026-02-12T10:14:44.881371-08:00","close_reason":"mail read now returns { alreadyRead: boolean } and prints informational message when message was already read"}
{"id":"overstory-dp7","title":"L4-2: Implement watchdog triage (src/watchdog/triage.ts)","description":"Tier 2 AI-assisted failure classification. When daemon detects stalled agent, triage analyzes logs to determine: recoverable stall (retry), genuine failure (terminate + report), or expected long operation (extend timeout). Uses claude --print for classification.","status":"closed","priority":4,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:12:14.924625-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:39:41.908478-08:00","closed_at":"2026-02-12T07:39:41.908478-08:00","close_reason":"All L4 modules implemented, lint+types clean","dependencies":[{"issue_id":"overstory-dp7","depends_on_id":"overstory-19p","type":"blocks","created_at":"2026-02-12T07:13:45.057659-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-dpk","title":" env var referenced in agent definitions but never set","description":"All base agent definitions (scout.md, builder.md, lead.md, reviewer.md, merger.md) reference $OVERSTORY_AGENT_NAME for the agent to know its own name. However, the sling command never sets this environment variable in the tmux session. The hooks work because they use hardcoded agent names (via {{AGENT_NAME}} template substitution), but if an agent tries to use $OVERSTORY_AGENT_NAME in ad-hoc commands, it will be empty. Either set the env var in the tmux session or update the agent definitions to reference the overlay.","status":"closed","priority":2,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:22:12.116692-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T08:45:12.475531-08:00","closed_at":"2026-02-12T08:45:12.475531-08:00","close_reason":"Closed"}
{"id":"overstory-e72","title":"agent-manifest.json capabilityIndex is always empty","description":"After 'overstory init', the agent-manifest.json has 'capabilityIndex: {}'. The manifest defines agents with capabilities (e.g., builder has 'implement, refactor, fix') but the capabilityIndex is never populated. This index should map capabilities to agent names for lookup (e.g., {'implement': ['builder', 'lead'], 'explore': ['scout']}). Without it, capability-based agent selection requires iterating all agents.","status":"closed","priority":3,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:15:59.653102-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T08:45:12.547374-08:00","closed_at":"2026-02-12T08:45:12.547374-08:00","close_reason":"Closed"}
{"id":"overstory-ekv","title":"init succeeds in non-git directory without warning","description":"'overstory init' succeeds in a directory that is not a git repository. Since overstory depends entirely on git (worktrees, branches, merge), init should detect whether the directory is inside a git repo and either fail with a clear error or warn the user that git is required.","status":"closed","priority":2,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:19:03.976557-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T08:29:23.535152-08:00","closed_at":"2026-02-12T08:29:23.535152-08:00","close_reason":"Added git repo check at start of init command. Throws ValidationError if not inside a git repository."}
{"id":"overstory-en4","title":"E2E test: builder agent concurrent test","status":"closed","priority":3,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T10:24:05.31921-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T10:35:41.188861-08:00","closed_at":"2026-02-12T10:35:41.188861-08:00","close_reason":"e2e test completed, builder agent concurrent test validated"}
{"id":"overstory-ewe","title":"L5-8: Write merge-queue.test.ts","description":"Tests for src/merge/queue.ts. Cover: FIFO ordering, enqueue/dequeue, status transitions (pending/merging/merged/conflict/failed), conflict detection between overlapping file sets.","status":"closed","priority":4,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:12:33.339278-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:54:20.509727-08:00","closed_at":"2026-02-12T07:54:20.509727-08:00","close_reason":"Closed","dependencies":[{"issue_id":"overstory-ewe","depends_on_id":"overstory-05o","type":"blocks","created_at":"2026-02-12T07:13:47.898715-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-fsh","title":"L5-10: Write overlay.test.ts","description":"Tests for src/agents/overlay.ts. Cover: template rendering with all variables (BEAD_ID, AGENT_NAME, SPEC_PATH, BRANCH_NAME, FILE_SCOPE, etc.), writeOverlay creates .claude/CLAUDE.md in worktree, missing template handling.","status":"closed","priority":4,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:12:35.132065-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:54:20.530193-08:00","closed_at":"2026-02-12T07:54:20.530193-08:00","close_reason":"Closed","dependencies":[{"issue_id":"overstory-fsh","depends_on_id":"overstory-05o","type":"blocks","created_at":"2026-02-12T07:13:48.209271-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-fz0","title":"merge-queue.json: missing trailing newline in JSON write","description":"src/merge/queue.ts line 64 writes JSON with writeFileSync without appending a trailing newline. This causes biome check to fail on merge-queue.json. Convention per mx-24764f requires all JSON written via Bun.write to include trailing newline. Fix: change writeFileSync call to append \\n to the JSON.stringify output.","status":"closed","priority":2,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T10:09:29.940528-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T10:14:00.644204-08:00","closed_at":"2026-02-12T10:14:00.644204-08:00","close_reason":"Fixed: writeQueue now appends trailing newline to JSON.stringify output per convention mx-24764f"}
{"id":"overstory-gr3","title":"L1-4: Implement tmux session manager (src/worktree/tmux.ts)","description":"Tmux session management via Bun.spawn(['tmux', ...]). Session naming: overstory-{agentName}. Functions: createSession, listSessions, killSession, isSessionAlive, sendKeys.","status":"closed","priority":1,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:37.64304-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:25:37.447979-08:00","closed_at":"2026-02-12T07:25:37.447979-08:00","close_reason":"Implemented tmux session manager — createSession, listSessions, killSession, isSessionAlive, sendKeys via Bun.spawn","dependencies":[{"issue_id":"overstory-gr3","depends_on_id":"overstory-68p","type":"blocks","created_at":"2026-02-12T07:13:39.242223-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-gst","title":"L0-2: Define shared types in src/types.ts","description":"All shared interfaces: OverstoryConfig, AgentManifest, AgentDefinition, AgentSession, AgentIdentity, MailMessage, OverlayConfig, MergeEntry, MergeResult, HealthCheck, LogEvent, SessionMetrics. Strict TypeScript, no any.","status":"closed","priority":0,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:09.615167-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:18:57.541223-08:00","closed_at":"2026-02-12T07:18:57.541223-08:00","close_reason":"Implemented types.ts (all shared types), errors.ts (error hierarchy), config.ts (config loader with defaults and validation)"}
{"id":"overstory-gtj","title":"L1-8: Implement mail SQLite store (src/mail/store.ts)","description":"SQLite mail storage via bun:sqlite. Schema: messages table with id, from_agent, to_agent, subject, body, type, priority, thread_id, read, created_at. WAL mode + busy_timeout=5000. Indexes on inbox (to_agent, read) and thread_id. CRUD operations.","status":"closed","priority":1,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:55.353422-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:26:01.474216-08:00","closed_at":"2026-02-12T07:26:01.474216-08:00","close_reason":"Implemented metrics storage (SQLite store + summary reporter) and mail SQLite store (schema, CRUD, WAL mode, prepared statements)","dependencies":[{"issue_id":"overstory-gtj","depends_on_id":"overstory-68p","type":"blocks","created_at":"2026-02-12T07:13:39.814739-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-gvw","title":"L2-4: Implement mail client (src/mail/client.ts)","description":"Mail client over SQLite store. Interface: send(msg) -\u003e id, check(agentName) -\u003e MailMessage[], checkInject(agentName) -\u003e string (hook format), list(filters) -\u003e MailMessage[], markRead(id), reply(id, body) -\u003e id. Synchronous by design (bun:sqlite is sync, ~1-5ms).","status":"closed","priority":2,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:54.498358-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:33:09.58236-08:00","closed_at":"2026-02-12T07:33:09.58236-08:00","close_reason":"All L2 modules implemented, lint+types clean","dependencies":[{"issue_id":"overstory-gvw","depends_on_id":"overstory-05o","type":"blocks","created_at":"2026-02-12T07:13:41.075267-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-hah","title":"merge command resolves merge-queue.json path inside worktree instead of project root","description":"'overstory merge --branch \u003cname\u003e' fails with 'Failed to write merge queue at ...worktree/.overstory/merge-queue.json'. The merge command is resolving the .overstory/ path relative to the worktree directory instead of the actual project root. Worktrees don't have their own .overstory/ directory. The merge queue file should be written to the main project's .overstory/merge-queue.json.","status":"closed","priority":1,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:18:07.628623-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T08:29:56.95078-08:00","closed_at":"2026-02-12T08:29:56.95078-08:00","close_reason":"Closed"}
{"id":"overstory-j1c","title":"L0-8: Write agents/reviewer.md base definition","description":"Reviewer agent: read-only validation agent. Can read files, run tests and lint. Cannot write files. Reviews code for correctness, style, security issues.","status":"closed","priority":0,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:31.656197-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:20:05.123949-08:00","closed_at":"2026-02-12T07:20:05.123949-08:00","close_reason":"Created all 5 base agent definitions: scout (read-only explorer), builder (implementation), reviewer (validation), lead (delegation), merger (branch integration)"}
{"id":"overstory-j3x","title":"worktree clean --all fails on worktrees with untracked files","description":"'overstory worktree clean --all' fails to remove worktrees that have modified/untracked files because it doesn't pass --force to git worktree remove. The error is 'contains modified or untracked files, use --force to delete it'. Since --all is an explicit user request to force-remove everything, it should pass --force to git. Note that the settings.local.json and .claude/CLAUDE.md written by hooks-deployer are 'untracked' files in the worktree, so this will always fail for agent worktrees.","status":"closed","priority":2,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:14:02.576868-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T08:29:25.004703-08:00","closed_at":"2026-02-12T08:29:25.004703-08:00","close_reason":"Added force option to removeWorktree and passed it from clean --all to handle untracked files."}
{"id":"overstory-kk4","title":"Overlay CLAUDE.md says 'Read your task spec at the path above' but spec path says 'No spec file provided'","description":"When sling is run without --spec, the overlay CLAUDE.md says 'Spec: No spec file provided' then immediately says 'Read your task spec at the path above.' This is confusing — the instruction to read the spec should be conditional on whether a spec was actually provided. The template at templates/overlay.md.tmpl should conditionally include this instruction.","status":"closed","priority":2,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T09:41:35.13135-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T09:50:58.142438-08:00","closed_at":"2026-02-12T09:50:58.142438-08:00","close_reason":"Overlay template now uses {{SPEC_INSTRUCTION}} placeholder. When spec provided: shows 'Read your task spec at the path above'. When null: shows 'No task spec was provided. Check your mail or ask your parent agent for details.' Added 2 new tests."}
{"id":"overstory-kqs","title":"L0-3: Define custom error types in src/errors.ts","description":"Custom error classes for overstory: ConfigError, ManifestError, WorktreeError, TmuxError, MailError, MergeError, WatchdogError. Each with meaningful context fields.","status":"closed","priority":0,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:13.418195-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:18:57.543446-08:00","closed_at":"2026-02-12T07:18:57.543446-08:00","close_reason":"Implemented types.ts (all shared types), errors.ts (error hierarchy), config.ts (config loader with defaults and validation)"}
{"id":"overstory-l2e","title":"L1-6: Implement mulch CLI client (src/mulch/client.ts)","description":"Wrapper around mulch CLI. Functions: prime(domains, format), status(), record(domain, data), query(domain). Parse --json output where available.","status":"closed","priority":1,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:45.257594-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:25:39.302566-08:00","closed_at":"2026-02-12T07:25:39.302566-08:00","close_reason":"Implemented mulch CLI client — prime, status, record, query, search via Bun.spawn","dependencies":[{"issue_id":"overstory-l2e","depends_on_id":"overstory-68p","type":"blocks","created_at":"2026-02-12T07:13:39.523265-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-l7y","title":"worktree clean does not delete agent branches","description":"When worktrees are cleaned (or manually removed), the associated git branches (e.g. overstory/test-builder-1/overstory-n4o) remain. Over time this leads to branch proliferation. 'overstory worktree clean' should also delete the associated branches after successful worktree removal, or there should be a separate 'overstory branch clean' command.","status":"closed","priority":3,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:19:59.712175-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T08:44:43.08805-08:00","closed_at":"2026-02-12T08:44:43.08805-08:00","close_reason":"worktree clean now force-deletes associated git branches via git branch -D through new forceBranch option on removeWorktree"}
{"id":"overstory-lh0","title":"Agents stuck in 'booting' state after tmux session killed","description":"When a tmux session is killed externally (tmux kill-session), the agent state remains 'booting' and the agent still shows as 'active' in 'overstory status'. The ○ indicator suggests the system detects the tmux session is gone (vs ● for running), but: 1) The agent state never transitions from 'booting' to 'running' or to 'failed/dead'. 2) The summary still says '2 active'. 3) There's no mechanism to detect and clean up zombie agent entries. The watchdog should detect this, or status should reflect the actual tmux state.","status":"closed","priority":2,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:13:50.937781-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T08:32:26.646925-08:00","closed_at":"2026-02-12T08:32:26.646925-08:00","close_reason":"Status command now reconciles agent state with tmux session existence, marking agents as zombie when tmux is dead"}
{"id":"overstory-lkp","title":"L2-7: Implement mail CLI command (src/commands/mail.ts)","description":"CLI command family: overstory mail send/check/list/read/reply. Parses CLI args, delegates to mail client. Supports --inject flag for hook context injection, --json for machine output, --from/--to/--unread filters.","status":"closed","priority":2,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:12:08.420424-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:33:09.648872-08:00","closed_at":"2026-02-12T07:33:09.648872-08:00","close_reason":"All L2 modules implemented, lint+types clean","dependencies":[{"issue_id":"overstory-lkp","depends_on_id":"overstory-05o","type":"blocks","created_at":"2026-02-12T07:13:41.508064-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-llw","title":"All agent sessions have the same PID (55777)","description":"In sessions.json, every agent has pid: 55777 regardless of when they were spawned. The PID is supposed to be the Claude Code process ID inside the tmux session but it appears to be hardcoded or not captured correctly. This makes PID-based liveness detection unreliable in the watchdog.","status":"closed","priority":2,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:19:22.962149-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T08:29:26.787574-08:00","closed_at":"2026-02-12T08:29:26.787574-08:00","close_reason":"Changed PID retrieval from tmux list-sessions (server PID) to tmux list-panes with pane_pid (actual process PID)."}
{"id":"overstory-lmo","title":"init generates .overstory/ JSON files with space indentation instead of tabs (Biome failure)","description":"overstory init generates hooks.json and agent-manifest.json using space indentation, but the project uses tab indentation enforced by Biome. Running 'biome check .' fails on these generated files with formatting errors. The init command should use tab-indented JSON.stringify (using \\t) consistent with the rest of the codebase. Additionally, Biome wants short arrays on a single line, so the generation code should match Biome's formatting preferences.","status":"closed","priority":2,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T09:42:07.528349-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T09:51:01.126978-08:00","closed_at":"2026-02-12T09:51:01.126978-08:00","close_reason":"init buildHooksJson() no longer reads the agent template (which had space indentation + agent placeholders). Now generates hooks.json directly with tab indentation matching Biome config. Also fixed templates/hooks.json.tmpl to use tab indentation."}
{"id":"overstory-lww","title":"L0-10: Write agents/merger.md base definition","description":"Merger agent: branch merge specialist. Handles conflict resolution using tiered approach (clean merge, auto-resolve, AI-resolve, reimagine). Works with overstory merge command.","status":"closed","priority":0,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:39.761389-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:20:05.126655-08:00","closed_at":"2026-02-12T07:20:05.126655-08:00","close_reason":"Created all 5 base agent definitions: scout (read-only explorer), builder (implementation), reviewer (validation), lead (delegation), merger (branch integration)"}
{"id":"overstory-lx9","title":"Sling spawns agent but sends no initial task prompt to tmux session","description":"overstory sling creates a tmux session running Claude Code in the agent worktree, but the agent just sits at the REPL prompt with no initial task. The SessionStart hook runs 'overstory prime --agent \u003cname\u003e' which provides context, but there is no actual task prompt or instruction sent. The agent needs to receive an initial prompt (e.g., 'Read your assignment in .claude/CLAUDE.md and begin working on task \u003cid\u003e'). Without this, the spawned agent does nothing. Consider using tmux send-keys to inject an initial prompt after the Claude Code session starts.","status":"closed","priority":1,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T09:40:59.153636-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T09:47:49.537517-08:00","closed_at":"2026-02-12T09:47:49.537517-08:00","close_reason":"Added sendKeys() call after tmux session creation in sling.ts to inject initial task prompt to the agent."}
{"id":"overstory-m0f","title":"mail: no purge/clean command for clearing old messages","description":"The mail DB accumulates messages from all sessions with no way to clean them up. 'mail list' shows dozens of old messages from test sessions and dead agents. Need a 'mail purge' or 'mail clean' subcommand to remove messages older than N days, messages to/from non-existent agents, or all messages. This is important for long-running projects where the mail DB would grow unbounded.","status":"closed","priority":4,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-12T10:34:49.005811-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T10:41:42.052566-08:00","closed_at":"2026-02-12T10:41:42.052566-08:00","close_reason":"Added mail purge subcommand with --all, --days N, --agent \u003cname\u003e, and --json support"}
{"id":"overstory-mxi","title":"L3-4: Implement merge command (src/commands/merge.ts)","description":"CLI: overstory merge --branch \u003cname\u003e | --all | --dry-run. Merges agent branches back to canonical branch. Uses merge queue + tiered resolver. Reports merge results with tier used and any conflict files.","status":"closed","priority":3,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:12:05.510494-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:36:21.695111-08:00","closed_at":"2026-02-12T07:36:21.695111-08:00","close_reason":"All L3 modules implemented, lint+types clean","dependencies":[{"issue_id":"overstory-mxi","depends_on_id":"overstory-rbj","type":"blocks","created_at":"2026-02-12T07:13:43.075886-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-my8","title":"L2-5: Implement sling command (src/commands/sling.ts)","description":"CRITICAL PATH. The overstory sling command orchestrates full agent spawn: 1) Load config + manifest, 2) Validate (name unique, depth limit, bead exists), 3) Create worktree, 4) Generate + write overlay CLAUDE.md, 5) Generate + write hooks config, 6) Claim beads issue, 7) Create tmux session running claude, 8) Record session in sessions.json, 9) Return AgentSession.","status":"closed","priority":2,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:59.30775-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:33:09.604276-08:00","closed_at":"2026-02-12T07:33:09.604276-08:00","close_reason":"All L2 modules implemented, lint+types clean","dependencies":[{"issue_id":"overstory-my8","depends_on_id":"overstory-05o","type":"blocks","created_at":"2026-02-12T07:13:41.219321-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-n4o","title":"Test task for sling","description":"Dummy task to test overstory sling command","status":"closed","priority":3,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:12:24.141653-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T08:23:25.824061-08:00","closed_at":"2026-02-12T08:23:25.824061-08:00","close_reason":"Test tasks created during integration testing, not real work"}
{"id":"overstory-n82","title":"L4-6: Implement metrics command (src/commands/metrics.ts)","description":"CLI: overstory metrics [--last \u003cn\u003e] [--json]. Shows metrics summary from SQLite store: session durations, success rates, merge tier distribution, agent utilization. Human-readable table or JSON output.","status":"closed","priority":4,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:12:33.162384-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:39:41.996046-08:00","closed_at":"2026-02-12T07:39:41.996046-08:00","close_reason":"All L4 modules implemented, lint+types clean","dependencies":[{"issue_id":"overstory-n82","depends_on_id":"overstory-19p","type":"blocks","created_at":"2026-02-12T07:13:45.606801-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-nau","title":"No DB-level constraints for mail type/priority columns","description":"The mail SQLite schema doesn't enforce valid type/priority values at the DB level. Historical test data includes messages with type='invalid_type' and priority='invalid_prio'. While CLI validation now rejects invalid values, direct SQLite access (from agents or tests) can still insert invalid data. Consider adding CHECK constraints to the mail table schema: type CHECK(type IN ('status','question','result','error')) and priority CHECK(priority IN ('low','normal','high','urgent')).","status":"closed","priority":3,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T09:41:38.954059-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T09:49:19.63794-08:00","closed_at":"2026-02-12T09:49:19.63794-08:00","close_reason":"Added CHECK constraints for type/priority columns to mail schema. Added migration to recreate existing tables with constraints (sanitizes invalid data to defaults). Added 5 new tests."}
{"id":"overstory-ne0","title":"init --force: regenerated hooks.json has broken log commands (missing --agent)","description":"Running 'overstory init --force' regenerates .overstory/hooks.json and strips {{AGENT_NAME}} template placeholders. This results in 'overstory log tool-start' (no --agent) in the hooks, which fails with VALIDATION_ERROR since --agent is required. The prime and mail check commands happen to work without --agent (they default to 'orchestrator'), but all three log commands (tool-start, tool-end, session-end) will fail on every hook invocation. The orchestrator hooks.json should either: (1) use '--agent orchestrator' explicitly, or (2) make --agent optional in log.ts with a default of 'orchestrator'.","status":"closed","priority":1,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T10:10:28.403348-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T10:13:54.055955-08:00","closed_at":"2026-02-12T10:13:54.055955-08:00","close_reason":"Added --agent orchestrator to all three log commands (tool-start, tool-end, session-end) in buildHooksJson() in init.ts"}
{"id":"overstory-nmz","title":"maxConcurrent agent limit is never enforced by sling","description":"The config has agents.maxConcurrent=5 but 'overstory sling' never checks this limit before spawning a new agent. You can spawn unlimited agents. The sling command should count active (non-zombie) sessions and reject new spawns if the limit would be exceeded.","status":"closed","priority":1,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:22:48.225682-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T08:29:56.97226-08:00","closed_at":"2026-02-12T08:29:56.97226-08:00","close_reason":"Closed"}
{"id":"overstory-nup","title":"L5-4: Write tmux.test.ts","description":"Tests for src/worktree/tmux.ts. Cover: create session, list sessions, kill session, isSessionAlive check, session naming convention (overstory-{agentName}). May need to mock tmux commands.","status":"closed","priority":4,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:12:29.912752-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:54:20.550763-08:00","closed_at":"2026-02-12T07:54:20.550763-08:00","close_reason":"Closed","dependencies":[{"issue_id":"overstory-nup","depends_on_id":"overstory-05o","type":"blocks","created_at":"2026-02-12T07:13:47.290705-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-o0g","title":"lastActivity timestamp never updated after agent spawn","description":"In sling.ts, lastActivity is set to the spawn timestamp and is never updated during the agent's lifetime. The log hooks (overstory log tool-start/tool-end) fire but don't update sessions.json with a new lastActivity timestamp. This means the watchdog's stale/zombie detection based on lastActivity is broken — agents will be marked stale/zombie based on time since spawn rather than time since actual activity. The log command should update lastActivity in sessions.json for the relevant agent.","status":"closed","priority":1,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:15:15.45079-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T08:29:56.927873-08:00","closed_at":"2026-02-12T08:29:56.927873-08:00","close_reason":"Closed"}
{"id":"overstory-oia","title":"L5-9: Write resolver.test.ts","description":"Tests for src/merge/resolver.ts. Cover: all 4 resolution tiers (clean-merge, auto-resolve, ai-resolve, reimagine). Mock git commands and claude --print calls. Verify tier escalation on failure.","status":"closed","priority":4,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:12:34.337956-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:54:20.572101-08:00","closed_at":"2026-02-12T07:54:20.572101-08:00","close_reason":"Closed","dependencies":[{"issue_id":"overstory-oia","depends_on_id":"overstory-05o","type":"blocks","created_at":"2026-02-12T07:13:48.05857-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-ow3","title":"sling: getFlag() accepts empty strings for --name and --files","description":"The getFlag() helper in sling.ts returns flag values without checking for empty strings. This means: (1) --name '' passes the truthy check since getFlag returns the next arg which could be another flag. (2) --files '' splits into [''] (array with one empty string element) instead of []. The empty string file scope could cause issues downstream. Fix: validate non-empty values after getFlag() returns, or trim and check length.","status":"closed","priority":3,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T10:09:36.559543-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T10:15:19.829597-08:00","closed_at":"2026-02-12T10:15:19.829597-08:00","close_reason":"Validate --name and --files for empty strings after getFlag()"}
{"id":"overstory-p0i","title":"watch --background flag not implemented","description":"The watch command help documents a --background flag for daemonization, but testing shows the watch command only runs in foreground. The --background flag should launch the watchdog as a background process (e.g., forking or using nohup) and print the PID. Currently watch must be manually backgrounded or run in a tmux session.","status":"closed","priority":3,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-12T09:41:45.078946-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T09:57:10.970147-08:00","closed_at":"2026-02-12T09:57:10.970147-08:00","close_reason":"Implemented --background flag using Bun.spawn detached process with PID file at .overstory/watchdog.pid"}
{"id":"overstory-qun","title":"sessions.json grows unbounded - no cleanup of zombie entries","description":"sessions.json accumulates all agent sessions (including zombies) indefinitely. There's no mechanism to prune old zombie entries. Over time with many sling cycles, this file will grow. Should add a cleanup mechanism - either 'overstory sessions prune' command, or auto-prune zombies older than a threshold, or move zombies to a separate history file.","status":"closed","priority":3,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:19:29.245975-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T08:44:44.296082-08:00","closed_at":"2026-02-12T08:44:44.296082-08:00","close_reason":"worktree clean now prunes zombie entries from sessions.json whose worktree paths no longer exist on disk"}
{"id":"overstory-r8a","title":"init --force doesn't preserve/migrate existing SQLite data (mail.db, metrics.db)","description":"Running overstory init --force reinitializes config files (config.yaml, agent-manifest.json, hooks.json) and recreates directories, but it doesn't warn that existing mail.db and metrics.db data will be orphaned. The DBs themselves survive (they're not deleted), but re-running init after the DBs exist means the new init doesn't check compatibility. If the schema ever changes, init --force won't migrate. Consider either: (1) adding a warning about existing data, (2) running schema migration on init, or (3) documenting this as expected behavior.","status":"closed","priority":2,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T09:41:31.601869-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T09:50:55.889866-08:00","closed_at":"2026-02-12T09:50:55.889866-08:00","close_reason":"init --force now runs schema migration on existing mail.db and metrics.db. Opens each DB, enables WAL mode, re-runs CREATE TABLE/INDEX IF NOT EXISTS to apply any schema additions without losing existing data. Prints migration status."}
{"id":"overstory-r9g","title":"L2-1: Implement overlay generator (src/agents/overlay.ts)","description":"Generate per-worker CLAUDE.md overlay from template. Functions: generateOverlay(config: OverlayConfig) -\u003e string, writeOverlay(worktreePath, config) -\u003e Promise\u003cvoid\u003e. Reads templates/overlay.md.tmpl, fills variables, writes to {worktree}/.claude/CLAUDE.md.","status":"closed","priority":2,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:41.648364-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:33:09.513247-08:00","closed_at":"2026-02-12T07:33:09.513247-08:00","close_reason":"All L2 modules implemented, lint+types clean","dependencies":[{"issue_id":"overstory-r9g","depends_on_id":"overstory-05o","type":"blocks","created_at":"2026-02-12T07:13:40.659473-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-rbj","title":"[Epic] Layer 2: Agent Lifecycle + Mail","description":"Agent lifecycle management and mail system. 7 parallel tasks. Depends on Layer 1 completion.","status":"closed","priority":2,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:37.127858-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:33:22.806001-08:00","closed_at":"2026-02-12T07:33:22.806001-08:00","close_reason":"All 7 L2 subtasks completed","dependencies":[{"issue_id":"overstory-rbj","depends_on_id":"overstory-r9g","type":"blocks","created_at":"2026-02-12T07:12:13.74256-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-rbj","depends_on_id":"overstory-vm0","type":"blocks","created_at":"2026-02-12T07:12:13.868048-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-rbj","depends_on_id":"overstory-2ed","type":"blocks","created_at":"2026-02-12T07:12:14.000538-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-rbj","depends_on_id":"overstory-gvw","type":"blocks","created_at":"2026-02-12T07:12:14.13539-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-rbj","depends_on_id":"overstory-my8","type":"blocks","created_at":"2026-02-12T07:12:14.263641-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-rbj","depends_on_id":"overstory-co8","type":"blocks","created_at":"2026-02-12T07:12:14.394936-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-rbj","depends_on_id":"overstory-lkp","type":"blocks","created_at":"2026-02-12T07:12:14.52104-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-rdd","title":"Test depth limit","description":"Temporary test task for depth limit testing","status":"closed","priority":4,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:16:53.488036-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T08:23:25.843231-08:00","closed_at":"2026-02-12T08:23:25.843231-08:00","close_reason":"Test tasks created during integration testing, not real work"}
{"id":"overstory-rdo","title":"[Epic] Layer 5: Tests","description":"All test files. 11 parallel tasks. Can run in parallel with Layers 3-4. Depends on Layer 2 completion.","status":"closed","priority":4,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:12:22.489209-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:56:38.532666-08:00","closed_at":"2026-02-12T07:56:38.532666-08:00","close_reason":"All 11 test files written and passing (238 tests, 505 assertions)","dependencies":[{"issue_id":"overstory-rdo","depends_on_id":"overstory-tdp","type":"blocks","created_at":"2026-02-12T07:12:40.394124-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-rdo","depends_on_id":"overstory-6ka","type":"blocks","created_at":"2026-02-12T07:12:41.198087-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-rdo","depends_on_id":"overstory-3wa","type":"blocks","created_at":"2026-02-12T07:12:42.407043-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-rdo","depends_on_id":"overstory-nup","type":"blocks","created_at":"2026-02-12T07:12:43.27148-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-rdo","depends_on_id":"overstory-uh0","type":"blocks","created_at":"2026-02-12T07:12:44.257265-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-rdo","depends_on_id":"overstory-dfc","type":"blocks","created_at":"2026-02-12T07:12:45.116103-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-rdo","depends_on_id":"overstory-38d","type":"blocks","created_at":"2026-02-12T07:12:45.906899-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-rdo","depends_on_id":"overstory-ewe","type":"blocks","created_at":"2026-02-12T07:12:46.656632-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-rdo","depends_on_id":"overstory-oia","type":"blocks","created_at":"2026-02-12T07:12:47.435775-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-rdo","depends_on_id":"overstory-fsh","type":"blocks","created_at":"2026-02-12T07:12:48.306522-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-rdo","depends_on_id":"overstory-a28","type":"blocks","created_at":"2026-02-12T07:12:49.850474-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-t0f","title":"L4-3: Implement health check definitions (src/watchdog/health.ts)","description":"Health check types and state machine. HealthCheck interface: agentName, timestamp, processAlive, tmuxAlive, lastActivity, state (AgentState), action (none/escalate/terminate). State transition rules and thresholds.","status":"closed","priority":4,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:12:18.810003-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:39:41.929193-08:00","closed_at":"2026-02-12T07:39:41.929193-08:00","close_reason":"All L4 modules implemented, lint+types clean","dependencies":[{"issue_id":"overstory-t0f","depends_on_id":"overstory-19p","type":"blocks","created_at":"2026-02-12T07:13:45.194074-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-tdp","title":"L5-1: Write config.test.ts","description":"Tests for src/config.ts. Cover: loading valid config, defaults for missing fields, validation errors for bad config, path resolution, missing config file handling.","status":"closed","priority":4,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:12:27.056998-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:47:43.22018-08:00","closed_at":"2026-02-12T07:47:43.22018-08:00","close_reason":"Wrote config.test.ts with 20 tests covering defaults, merging, parsing, and validation","dependencies":[{"issue_id":"overstory-tdp","depends_on_id":"overstory-05o","type":"blocks","created_at":"2026-02-12T07:13:46.840932-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-tgb","title":"L3-3: Implement molecule helpers (src/beads/molecules.ts)","description":"Beads molecule management for multi-step workflows. Helpers for creating molecule prototypes, pouring instances, tracking convoy progress. Wraps bd mol commands.","status":"closed","priority":3,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:12:01.871321-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:36:21.672447-08:00","closed_at":"2026-02-12T07:36:21.672447-08:00","close_reason":"All L3 modules implemented, lint+types clean","dependencies":[{"issue_id":"overstory-tgb","depends_on_id":"overstory-rbj","type":"blocks","created_at":"2026-02-12T07:13:42.92718-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-tia","title":"Colocate tests with source files (move from __tests__/ to src/)","description":"Move test files from the centralized __tests__/ directory to live alongside their source files. E.g. __tests__/config.test.ts -\u003e src/config.test.ts, __tests__/mail-store.test.ts -\u003e src/mail/store.test.ts. This improves discoverability, makes it obvious which modules have tests, and aligns with modern TS project conventions. Update biome/tsconfig if needed to include new test locations.","status":"closed","priority":2,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:56:06.312445-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T09:00:57.441947-08:00","closed_at":"2026-02-12T09:00:57.441947-08:00","close_reason":"Colocated all 12 test files from __tests__/ to src/. Updated all import paths, fixed Biome import ordering, updated tsconfig.json include. All 261 tests pass, biome check clean, tsc clean."}
{"id":"overstory-tko","title":"L0-12: Write templates/overlay.md.tmpl","description":"Template for per-worker dynamic overlay CLAUDE.md. Variables: {{BEAD_ID}}, {{AGENT_NAME}}, {{SPEC_PATH}}, {{BRANCH_NAME}}, {{FILE_SCOPE}}, {{MULCH_DOMAINS}}, {{PARENT_AGENT}}, {{CAN_SPAWN}}.","status":"closed","priority":0,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:48.034743-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:18:45.108437-08:00","closed_at":"2026-02-12T07:18:45.108437-08:00","close_reason":"Created all 3 templates: CLAUDE.md.tmpl (orchestrator awareness), overlay.md.tmpl (per-worker overlay), hooks.json.tmpl (agent hooks config)"}
{"id":"overstory-u19","title":"[Epic] Layer 4: Watchdog + CLI Router","description":"Watchdog daemon, remaining CLI commands, and main CLI router. 8 parallel tasks. Depends on Layer 3 completion.","status":"closed","priority":4,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:12:07.077987-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:39:53.50198-08:00","closed_at":"2026-02-12T07:39:53.50198-08:00","close_reason":"All 8 L4 subtasks completed","dependencies":[{"issue_id":"overstory-u19","depends_on_id":"overstory-c2x","type":"blocks","created_at":"2026-02-12T07:12:48.035004-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-u19","depends_on_id":"overstory-dp7","type":"blocks","created_at":"2026-02-12T07:12:48.848609-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-u19","depends_on_id":"overstory-t0f","type":"blocks","created_at":"2026-02-12T07:12:49.800684-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-u19","depends_on_id":"overstory-3n0","type":"blocks","created_at":"2026-02-12T07:12:50.626577-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-u19","depends_on_id":"overstory-2kn","type":"blocks","created_at":"2026-02-12T07:12:51.431128-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-u19","depends_on_id":"overstory-n82","type":"blocks","created_at":"2026-02-12T07:12:52.590077-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-u19","depends_on_id":"overstory-z5y","type":"blocks","created_at":"2026-02-12T07:12:53.715455-08:00","created_by":"Jaymin West"},{"issue_id":"overstory-u19","depends_on_id":"overstory-b02","type":"blocks","created_at":"2026-02-12T07:12:54.528846-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-uh0","title":"L5-5: Write beads-client.test.ts","description":"Tests for src/beads/client.ts. Cover: ready(), show(id), create(), claim(), close(), status(). Mock bd CLI subprocess calls. Verify --json flag usage and output parsing.","status":"closed","priority":4,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:12:30.698722-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:54:20.592935-08:00","closed_at":"2026-02-12T07:54:20.592935-08:00","close_reason":"Closed","dependencies":[{"issue_id":"overstory-uh0","depends_on_id":"overstory-05o","type":"blocks","created_at":"2026-02-12T07:13:47.430304-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-uid","title":"beads-client.test.ts: Replace Bun.spawn mocks with real bd CLI","description":"beads-client.test.ts mocks all Bun.spawn calls for bd CLI invocations. Replace with real bd operations using a temp directory with an initialized beads project. This tests actual bd JSON output parsing, flag handling, and error behavior. Guard with a check for bd availability so tests skip gracefully in environments without bd installed. Keep the existing mock-based tests as a fallback or remove if real tests provide equivalent coverage.","status":"closed","priority":2,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:56:19.499166-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T09:08:48.083455-08:00","closed_at":"2026-02-12T09:08:48.083455-08:00","close_reason":"Replaced Bun.spawn mocks with real bd CLI integration tests, fixed client to handle bd show array response and issue_type field mapping","dependencies":[{"issue_id":"overstory-uid","depends_on_id":"overstory-y72","type":"blocks","created_at":"2026-02-12T08:56:33.544099-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-uow","title":"mail read silently succeeds for nonexistent message IDs","description":"'overstory mail read nonexistent-id' reports 'Marked nonexistent-id as read' with exit 0 even though no such message exists. Should validate the message ID and return an error. In contrast, 'overstory mail reply nonexistent-id' correctly errors with 'Message not found'.","status":"closed","priority":3,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:11:07.145987-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T08:43:48.204637-08:00","closed_at":"2026-02-12T08:43:48.204637-08:00","close_reason":"Added existence check in MailClient.markRead — now throws MailError with message ID when the ID is not found, matching the pattern already used by reply()"}
{"id":"overstory-uox","title":"L0-5: Write CLAUDE.md project conventions","description":"Overstory project conventions file. Documents CLI commands, agent workflow, beads integration, mulch usage, hook patterns. This is the orchestrator's reference.","status":"closed","priority":0,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:20.300086-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:18:36.442366-08:00","closed_at":"2026-02-12T07:18:36.442366-08:00","close_reason":"Wrote comprehensive CLAUDE.md with project overview, architecture, coding conventions, CLI reference, and quality gates"}
{"id":"overstory-vm0","title":"L2-2: Implement hooks deployer (src/agents/hooks-deployer.ts)","description":"Deploy hooks config to agent worktree as .claude/settings.local.json. Reads templates/hooks.json.tmpl, fills agent name, writes to worktree. Configures SessionStart, UserPromptSubmit, Pre/PostToolUse, Stop, PreCompact hooks.","status":"closed","priority":2,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:11:45.827006-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:33:09.537094-08:00","closed_at":"2026-02-12T07:33:09.537094-08:00","close_reason":"All L2 modules implemented, lint+types clean","dependencies":[{"issue_id":"overstory-vm0","depends_on_id":"overstory-05o","type":"blocks","created_at":"2026-02-12T07:13:40.792546-08:00","created_by":"Jaymin West"}]}
{"id":"overstory-vxx","title":"Test task: scout the codebase","status":"closed","priority":2,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:00:56.934175-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T08:04:14.502201-08:00","closed_at":"2026-02-12T08:04:14.502201-08:00","close_reason":"Hands-on testing complete"}
{"id":"overstory-wgx","title":"prime --agent for nonexistent agent outputs full mulch context without warning","description":"Running 'overstory prime --agent nonexistent' succeeds (exit 0) and outputs a full context block including all mulch expertise, with only a subtle 'New agent - no prior sessions' line to indicate the agent doesn't exist. Should either warn that the agent name is not in the active sessions, or at minimum make the 'new agent' notice more prominent. Currently easy to miss that you've primed for the wrong agent name.","status":"closed","priority":3,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T10:09:45.565836-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T10:15:29.244925-08:00","closed_at":"2026-02-12T10:15:29.244925-08:00","close_reason":"Check sessions.json and identity store before outputting agent context, warn if agent not found"}
{"id":"overstory-xn5","title":"sling --spec does not validate that spec file exists","description":"'overstory sling --spec /nonexistent/spec.md' succeeds and launches an agent with an overlay that says 'Spec: /nonexistent/spec.md' and instructs 'Read your task spec at the path above'. The agent will waste time trying to read a nonexistent file. Sling should validate the spec path exists before spawning.","status":"closed","priority":3,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:18:49.318108-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T08:43:21.436478-08:00","closed_at":"2026-02-12T08:43:21.436478-08:00","close_reason":"Added spec file existence validation in sling --spec. Uses Bun.file().exists() to check the spec path before spawning, throwing a ValidationError if the file does not exist."}
{"id":"overstory-y72","title":"Create shared test harness: real git repo + temp dir helpers","description":"Build a small shared test utility module (e.g. src/test-helpers.ts or test/helpers.ts) that provides: (1) createTempGitRepo() - initializes a real git repo in a temp dir with an initial commit, (2) cleanupTempDir() - rm -rf helper, (3) commitFile() - add and commit a file to a test repo. These helpers enable multiple test files to use real git instead of mocking Bun.spawn. Keeps test setup DRY across worktree, resolver, and sling tests.","status":"closed","priority":2,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:56:10.598442-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T09:00:03.92038-08:00","closed_at":"2026-02-12T09:00:03.92038-08:00","close_reason":"Created src/test-helpers.ts with createTempGitRepo(), commitFile(), cleanupTempDir() + src/test-helpers.test.ts (8 tests passing)"}
{"id":"overstory-z5y","title":"L4-7: Implement init command (src/commands/init.ts)","description":"CLI: overstory init. Scaffolds .overstory/ in current project: creates config.yaml with defaults, agent-manifest.json, hooks.json, directories (agents/, worktrees/, specs/, logs/). Updates .gitignore with worktrees, logs, metrics.db, mail.db. Updates .claude/CLAUDE.md with overstory awareness.","status":"closed","priority":4,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:12:37.582518-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:39:42.022851-08:00","closed_at":"2026-02-12T07:39:42.022851-08:00","close_reason":"All L4 modules implemented, lint+types clean","dependencies":[{"issue_id":"overstory-z5y","depends_on_id":"overstory-19p","type":"blocks","created_at":"2026-02-12T07:13:45.765542-08:00","created_by":"Jaymin West"}]}
